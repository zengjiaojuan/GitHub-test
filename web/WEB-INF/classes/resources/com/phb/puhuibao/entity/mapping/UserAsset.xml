<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.phb.puhuibao.entity.UserAsset">
  <!-- RESOURCE RESULTMAP -->
  <resultMap id="resourceResultMap" type="com.phb.puhuibao.entity.UserAsset">
    <id property="mUserId" column="m_user_id" jdbcType="INTEGER" />
	<result property="mUserName" column="m_user_name" jdbcType="VARCHAR" />
	<result property="mUserTel" column="m_user_tel" jdbcType="VARCHAR" />
    <result property="mUserMoney" column="m_user_money" jdbcType="DECIMAL" />
    <result property="frozenMoney" column="frozen_money" jdbcType="DECIMAL" />
    <result property="bidInvestmentAmount" column="bid_investment_amount" jdbcType="INTEGER" />
    <result property="itemInvestmentAmount" column="item_investment_amount" jdbcType="INTEGER" />
    <result property="creditLoanAmount" column="credit_loan_amount" jdbcType="INTEGER" />
  </resultMap>
  
  <select id="findByPager" parameterType="java.util.Map" resultMap="resourceResultMap">
    select m_user_id,m_user_name,m_user_tel,m_user_money,frozen_money,(select sum(investment_amount) FROM phb_muser_investment where status=1 and m_user_id=a.m_user_id)bid_investment_amount,(select sum(investment_amount) FROM phb_item_investment where status=1 and m_user_id=a.m_user_id)item_investment_amount,(select sum(amount) FROM phb_muser_loan where status=1 and type=0 and m_user_id=a.m_user_id)credit_loan_amount from phb_mobile_user a order by m_user_tel limit ${sno-1},${eno}
  </select>
  <select id="findByPagerCount" parameterType="java.util.Map" resultType="int" >
	select count(1) from phb_mobile_user
  </select>
</mapper>